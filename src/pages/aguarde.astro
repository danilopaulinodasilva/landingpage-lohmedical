---

import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import Logo from '../components/Logo.astro';

---

<Layout title="Aguarde | Loh Medical">
	<div class="container-fluid p-0">

    <header id="hero">
      <div class="container">
        
        <div class="row">
          <div class="col-sm-12 col-md-6 logo">
            <Logo />
          </div>
        </div>

        <div class="row g-5 p-5 cta">
          <div class="col-12 py-5 text-center">
            <h1>Aguarde...</h1>
            <p>Em alguns instantes você será redirecionado.</p>
          </div>
        </div>

      </div>
    </header>

    <script is:inline>
      // Função para decodificar o hash Base64
      function decodeBase64Hash() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);

        // Itera sobre os parâmetros da query string para encontrar um hash Base64
        for (let pair of urlParams.entries()) {
          const decodedUrl = atob(pair[1]);
          if (decodedUrl.startsWith('https://api.whatsapp.com')) {
            // Redireciona para a URL original
            window.location.replace(decodedUrl);
            return;
          }
        }

        console.error('Hash Base64 correspondente à URL do WhatsApp não encontrado na query string.');
      }

      // Chama a função ao carregar a página
      window.onload = decodeBase64Hash;
    </script>

  <Footer />

</div>

</Layout>
